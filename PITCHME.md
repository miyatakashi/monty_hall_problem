## モンティ・ホール問題をPythonを使って解いてみる
### drawn by miyatakashi
### 30th Sept. 2019 markdown issued on 26th Sept. 2019
---
## お前誰よ?

```elixir

・　なまえ	みやうち　たかし

・　おしごと	昔は COBOL でオンラインを書いたこともあるが、今は一応物流関係のお仕事に従事。

	だが、システムがトラブルと DB を直接叩く荒業を駆使する場合多数。
	
	今年の年末は物流システムの更新が予定されており、紅白歌合戦はまず見られない（悔）

・	居住地	豊橋に10年住んでいます。

・	ほしい物	寝る時間

```

---

## モンティ・ホール問題とは何か
## Let’s MAKE A DEAL!!

プレーヤーの前に閉まった 3つのドアがあって、1つのドアの後ろには景品の新車が、2つのドアの後ろには、はずれを意味するヤギがいる。

プレーヤーは新車のドアを当てると新車がもらえる。

プレーヤーが 1つのドアを選択した後、司会のモンティが残りのドアのうちヤギがいるドアを開けてヤギを見せる。

ここでプレーヤーは、最初に選んだドアを、残っている開けられていないドアに変更してもよいと言われる。

プレーヤーはドアを変更すべきだろうか？

---

## モンティ・ホール問題とは何か
## 「直感で正しいと思える解答と、論理的に正しい解答が異なる問題」の適例

1990年 9月 9日発行、ニュース雑誌「Parade」にてマリリン・ボス・サヴァントが連載するコラム「マリリンにおまかせ」で、上記の読者投稿による質問に

「正解は『ドアを変更する』である。なぜなら、ドアを変更した場合には景品を当てる確率が 2倍になるからだ」

と回答した。

すると直後から、読者からの「彼女の解答は間違っている」との約 1万通の投書が殺到し、本問題は大議論に発展した。

（Wikipedia より）

---

# **本当** だろうか？


---

## 試行する前にモデルを作ろう

|   |   とびら１   |   とびら２    |   とびら３   |   最初の選択でアタリ   |   とびら変えたらアタリ   |
|---|-------------|--------------|-------------|---|---|
|   |  (p, q, r)  |  (p, q, r)  |  (p, q, r)  |  m  |  n  |
| 例 | (1, 1, 0) | (0, 0, 1) | (0, 0, 0) | 1 | 0 |
| 例 | (0, 1, 0) | (0, 0, 1) | (1, 0, 0) | 0 | 1 |
| 発生しない | (0, 0, 0) | (1, 1, 1) | (0, 0, 0) | - | - |
| | | | | | |

<br>

| 記号 | 意味 |
|----|----|
| p | アタリなら 1、ハズレは 0 |
| q | プレイヤーの最初の選択 |
| r | モンティが開けたとびら |
| m | 1 ならアタリ、0 はハズレ |
| n | 1 ならアタリ、0 はハズレ |
|   |  |

<br>

p と q は独立の試行といえる。

r は p・q の結果に依存する。


---

## よ～く考えてみよう

プレーヤーが最初の選択でアタリを得る確率は１／３である。

プレーヤーが選択したあと残った扉は２枚、よって、残りのアタリ確率は２／３になる。

２／３のうち、外れた扉はモンティが開けてくれる。
残った扉は１枚しかない。

プレーヤーが扉を乗り換える、ということは２／３の確率にありつける、ということになる。

以上により、プレーヤーが最初に選んだ扉でアタリを得る確率は１／３、モンティがハズレ扉を開けたあとに残った扉に乗り換えた場合、アタリを得る確率は２／３になる。

---

## pythonでプログラミングして仮説を検証してみる

・　openpyexl を使用する。結果は Excel に吐き出す。

・　tuple・list・辞書の扱い方を理解するのに結構良い教材だったりする。

・　初心者はトライしやすいが、当方が制作するのに丸一日かかりました（汗）。


---

## 検証結果

・　Excel に吐き出したので見てくれ！

---

## 将来計画

・　とびらが n 枚 ( n ≧ 3 ) あり、モンティはヤギのいるとびらを 1枚だけ開く場合の確率を考える。

・　とびらが n 枚 ( n ≧ 3 ) あり、モンティはヤギのいるとびらを m 枚 ( 0 < m < n - 1 ) 開く場合の確率を考える。


